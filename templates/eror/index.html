<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mi-Stack | Host Node.js</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
    body{background:url('https://images.unsplash.com/photo-1614732414444-096e5f1122d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80')center/cover fixed;
      min-height:100vh;display:flex;flex-direction:column;}
    header{background:rgba(0,122,204,0.8);backdrop-filter:blur(10px);
      color:#fff;padding:20px;text-align:center;position:relative;
      box-shadow:0 4px 15px rgba(0,0,0,0.2);}
    header h1{font-size:2.5rem;margin-bottom:5px;}
    .auth-links{position:absolute;top:20px;right:20px;}
    .auth-links a{margin-left:15px;text-decoration:none;color:#fff;font-weight:500;
      transition:transform .2s, color .2s;}
    .auth-links a:hover{color:#ffcc00;transform:scale(1.1);}
    .container{max-width:800px;margin:30px auto;background:rgba(255,255,255,0.85);
      padding:30px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);
      backdrop-filter:blur(10px);margin-bottom:50px;text-align:center;}
    .icon-row{display:flex;justify-content:center;gap:40px;margin:20px 0;}
    .icon-row img{width:60px;height:60px;cursor:pointer;transition:transform .3s;}
    .icon-row img:hover{transform:scale(1.3);}
    p.login-prompt{margin-top:20px;font-size:1.1rem;color:#333;}
    .modal-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:none;
      justify-content:center;align-items:center;background:rgba(0,0,0,0.5);
      backdrop-filter:blur(5px);z-index:1000;}
    .modal{background:#fff;padding:30px;border-radius:15px;max-width:600px;
      width:90%;box-shadow:0 0 20px rgba(0,0,0,0.3);transform:scale(0.8);opacity:0;
      transition:all .3s;}
    .modal.show{transform:scale(1);opacity:1;}
  </style>
</head><body>
  <header>
    <h1>üöÄ Mi-Stack</h1>
    <p>Host your Node.js app with ZIP or GitHub ‚Äî Free & Fast</p>
    <div class="auth-links">
      {% if user.is_authenticated %}
        <span style="color:white; font-weight:600;">Hi {{ user.email }}</span>
        <a href="/logout">Logout</a>
      {% else %}
        <a href="/login">Login</a>
        <a href="/register">Register</a>
      {% endif %}
    </div>
  </header>
  <main>
    <div class="container welcome-section">
      <h2>Welcome to Mi-Stack</h2>
      <div class="icon-row">
        <img src="https://cdn-icons-png.flaticon.com/512/1055/1055710.png"
             title="How it works" onclick="openModal('how')"/>
        <img src="https://cdn-icons-png.flaticon.com/512/2910/2910797.png"
             title="ZIP example" onclick="openModal('zip')"/>
        <img src="https://cdn-icons-png.flaticon.com/512/1995/1995522.png"
             title="About us" onclick="openModal('about')"/>
      </div>
      {% if not user.is_authenticated %}
      <p class="login-prompt">
        Please <a href="/login">login</a> or <a href="/register">register</a> to start hosting your apps.
      </p>
      {% else %}
      <p class="login-prompt">
        You are logged in. Go to <a href="/list-apps">your apps</a> or <a href="/logout">logout</a>.
      </p>
      {% endif %}
    </div>

    <div class="modal-bg" id="modalBg">
      <div class="modal" id="modalContent"></div>
    </div>
  </main>

  <script>
    const modalBg = document.getElementById('modalBg');
    const modal = document.getElementById('modalContent');
    function openModal(type){
      let html = '';
      if(type==='how'){
        html = `
          <h3>üõ†Ô∏è How Mi-Stack Works</h3>
          <p>Deploy any Node.js app easily: upload a ZIP or provide GitHub repo URL.</p>
          <p><strong>Usage Steps:</strong></p>
          <ol>
            <li>Zip your project with <code>server.js</code>, <code>package.json</code> (with start script), and <code>public/</code>.</li>
            <li>Or create a GitHub repo, then copy HTTPS URL:</li>
          </ol>
          <img src="https://docs.github.com/assets/images/help/repository/code-button.png"
               alt="GitHub code button" style="max-width:100%;margin:10px 0;"/>
          <p>Click "Code" ‚Üí copy HTTPS URL ‚Üí paste it in the field.</p>`;
      }
      if(type==='zip'){
        html = `
          <h3>üì¶ ZIP File Structure</h3>
          <p>Ensure your <code>project.zip</code> has this format:</p>
          <pre style="background:#f9f9f9;padding:15px;border-radius:8px;overflow:auto;">
project.zip
‚îú‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ public/
    ‚îú‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ style.css
    ‚îî‚îÄ‚îÄ script.js
          </pre>
          <p><strong>Why is <code>package.json</code> required?</strong></p>
          <p>
            The <code>package.json</code> file defines your app‚Äôs dependencies and scripts.<br/>
            Make sure it includes a <code>"start"</code> script like this:
          </p>
          <pre style="background:#f4f4f4;padding:10px;border-left:4px solid #007acc;">
{
  "name": "my-app",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.2"
  }
}
          </pre>
          <p>This ensures Mi-Stack can install dependencies and run your app properly.</p>
        `;
      }
      if(type==='about'){
        html = `
          <h3>About Us</h3>
          <p>Mi-Stack was created by <strong>Missari</strong>, a passionate developer aiming to make Node.js hosting simple and accessible.</p>
          <p>Our mission is to empower developers to deploy apps in seconds ‚Äî no hassle, no servers.</p>`;
      }
      modal.innerHTML = html;
      modalBg.style.display = 'flex';
      setTimeout(()=>modal.classList.add('show'),50);
    }
    modalBg.addEventListener('click',e=>{
      if(!modal.contains(e.target)){
        modal.classList.remove('show');
        setTimeout(()=>modalBg.style.display='none',200);
      }
    });
  </script>
</body></html>
